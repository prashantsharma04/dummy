template:
  name: parallelStepGroup
  type: Stage
  projectIdentifier: naidusanity
  orgIdentifier: default
  spec:
    type: Custom
    spec:
      execution:
        steps:
          - step:
              type: Wait
              name: Wait_1
              identifier: Wait_1
              spec:
                duration: 10m
          - parallel:
              - step:
                  type: ShellScript
                  name: ShellScript_1
                  identifier: ShellScript_1
                  timeout: 10m
                  spec:
                    shell: Bash
                    onDelegate: true
                    source:
                      type: Inline
                      spec:
                        script: |-
                          sleep 20
                          echo "ok"
                    environmentVariables: []
                    outputVariables: []
              - stepGroup:
                  name: sg
                  identifier: sg
                  steps:
                    - step:
                        type: HarnessApproval
                        name: HarnessApproval_1
                        identifier: HarnessApproval_1
                        timeout: 1d
                        spec:
                          approvalMessage: Please review the following information and approve the pipeline progression
                          includePipelineExecutionHistory: true
                          isAutoRejectEnabled: false
                          approvers:
                            userGroups:
                              - shalinitest
                            minimumCount: 1
                            disallowPipelineExecutor: false
                          approverInputs: []
                    - step:
                        type: Http
                        name: Http_1
                        identifier: Http_1
                        timeout: 10s
                        spec:
                          url: https://www.google.com
                          method: GET
                          headers: []
                          inputVariables:
                            - name: var1
                              value: <+input>.executionInput()
                              type: String
                          outputVariables: []
                  when:
                    stageStatus: Success
                    condition: "true"
  identifier: parallelStepGroup
  versionLabel: v1
